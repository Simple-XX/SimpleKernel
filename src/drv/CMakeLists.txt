
# This file is a part of Simple-XX/SimpleKernel (https://github.com/Simple-XX/SimpleKernel).
#
# CMakeLists.txt for Simple-XX/SimpleKernel.

PROJECT(drv CXX)

if (SimpleKernelArch STREQUAL i386 OR SimpleKernelArch STREQUAL x86_64)
    aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/tui tui_src)
    aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/keyboard keyboard_src)
    set(drv_src ${tui_src} ${keyboard_src})
elseif (SimpleKernelArch STREQUAL arm)
    aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/uart uart_src)
    set(drv_src ${uart_src})
elseif (SimpleKernelArch STREQUAL riscv64)
    aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/opensbi opensbi_src)
    aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/sbi_console sbi_console_src)
    set(drv_src ${opensbi_src} ${sbi_console_src})
endif ()

add_library(${PROJECT_NAME} OBJECT ${drv_src})

target_include_libc_header_files(${PROJECT_NAME})
target_include_kernel_header_files(${PROJECT_NAME})
target_include_drv_header_files(${PROJECT_NAME})
target_include_common_header_files(${PROJECT_NAME})
target_include_arch_header_files(${PROJECT_NAME})
